<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Acceso a los Tests</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #e9f5ff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      padding: 10px;
    }
    .container {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 400px;
      text-align: center;
    }
    #testLinks, #dailyQuestion {
      display: none;
    }
    .input-group {
      display: flex;
      gap: 10px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
      height: 40px;
    }
    input {
      flex: 1;
    }
    button {
      background-color: #007BFF;
      color: white;
      border: none;
      cursor: pointer;
      width: 100px;
    }
    button:hover {
      background-color: #0056b3;
    }
    h1 {
      text-align: center;
    }
  </style>
  <script>
    async function hashPassword(password) {
      const encoder = new TextEncoder();
      const data = encoder.encode(password);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(byte => byte.toString(16).padStart(2, '0')).join('');
    }

    async function checkPassword() {
      var password = document.getElementById("password").value;
      var hashedInput = await hashPassword(password);
      var correctHash = "b1556dea32e9d0cdbfed038fd7787275775ea40939c146a64e205bcb349ad02f";

      if (hashedInput === correctHash) {
        document.getElementById("unlockSection").style.display = "none";
        document.getElementById("testLinks").style.display = "block";
        document.getElementById("dailyQuestion").style.display = "block";
        showDailyQuestion();
      } else {
        alert("Código incorrecto. Inténtalo de nuevo.");
      }
    }

    function showDailyQuestion() {
      const questions = [
        "¿Cuál es el objetivo principal de la Constitución Española de 1978?",
        "¿Qué derechos garantiza el Estatuto de Autonomía de Extremadura?",
        "¿Cuál es la función principal del Personal Subalterno en un hospital?",
        "¿Qué establece la Ley de Igualdad en el ámbito laboral?"
      ];
      
      let today = new Date().toISOString().split("T")[0];
      let storedDate = localStorage.getItem("questionDate");
      let storedQuestion = localStorage.getItem("questionText");
      
      if (storedDate === today && storedQuestion) {
        document.getElementById("dailyQuestion").innerText = "Pregunta del día: " + storedQuestion;
      } else {
        let randomIndex = Math.floor(Math.random() * questions.length);
        let newQuestion = questions[randomIndex];
        localStorage.setItem("questionDate", today);
        localStorage.setItem("questionText", newQuestion);
        document.getElementById("dailyQuestion").innerText = "Pregunta del día: " + newQuestion;
      }
    }

    document.addEventListener("DOMContentLoaded", function() {
      document.getElementById("password").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
          event.preventDefault();
          checkPassword();
        }
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <div id="unlockSection">
      <p>Introduce el código para acceder:</p>
      <div class="input-group">
        <input type="password" id="password">
        <button onclick="checkPassword()">Desbloquear</button>
      </div>
    </div>

    <div id="testLinks">
      <h1>PARTE COMÚN</h1>
      <ul>
        <li><a href="COMUN_TEMA1.html">TEMA 1: La Constitución Española de 1978</a></li>
        <li><a href="COMUN_TEMA2.html">TEMA 2: El Estatuto de Autonomía de Extremadura</a></li>
      </ul>
      <h1>PARTE ESPECÍFICA</h1>
      <ul>
        <li><a href="ESPEC_TEMA1.HTML">TEMA 1: Nociones básicas de la Asistencia Sanitaria</a></li>
        <li><a href="ESPEC_TEMA2.HTML">TEMA 2: Funciones del Celador</a></li>
      </ul>
    </div>
    
    <div id="dailyQuestion" class="container"></div>
  </div>
</body>
</html>

